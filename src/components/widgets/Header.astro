---
import { Icon } from 'astro-icon/components'
import ToggleTheme from '~/components/common/ToggleTheme.astro'
import ToggleMenu from '~/components/common/ToggleMenu.astro'
import Button from '~/components/ui/Button.astro'
import '@fontsource/anuphan'
import { FaXTwitter } from 'react-icons/fa6'
import { FaGithub } from 'react-icons/fa'
import { TfiEmail } from 'react-icons/tfi'
import { FaLinkedin } from 'react-icons/fa6'
import { Astronav, MenuItems, MenuIcon, Dropdown, DropdownItems } from 'astro-navbar'

import { getHomePermalink } from '~/utils/permalinks'
import { trimSlash, getAsset } from '~/utils/permalinks'
import type { Props } from '~/types'

const props = Astro.props || {}
const id = props.id ?? 'header'
const links = props.links ?? []
const actions = props.actions ?? []
const isSticky = props.isSticky ?? false
const isDark = props.isDark ?? false
const isFullWidth = props.isFullWidth ?? false
const showToggleTheme = props.showToggleTheme ?? false
const showRssFeed = props.showRssFeed ?? false
const position = props.position ?? 'center'

const currentPath = Astro.url ? `/${trimSlash(new URL(Astro.url).pathname)}` : '/'
---

<script client:load>
  document.addEventListener('DOMContentLoaded', () => {
    const header = document.querySelector('#header')
    const shrinkThreshold = 50

    if (!header) return

    window.addEventListener('scroll', () => {
      if (window.scrollY > shrinkThreshold) {
        header.classList.add('navbar-shrink')
      } else {
        header.classList.remove('navbar-shrink')
      }
    })
  })
</script>

<!-- Add 'select-none' to prevent text selection -->
<header id="header" class="bg-[#F5EFE6] border-b border-[#EDE0D4] sticky top-0 z-50 shadow-md select-none">
  <div class="container mx-auto flex items-center justify-between py-2 px-6 relative">
    <div class="flex items-center space-x-4">
      <button class="md:hidden p-0 text-[#4B3832] hover:text-[#8C6A5E] focus:outline-none">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="2"
          stroke="currentColor"
          class="w-6 h-6"
        >
          <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16m-7 6h7"></path>
        </svg>
      </button>

      <a href="/" class="flex items-center">
        <img
          src="/src/assets/images/logo_design/svg/noetiq_logodesign_secondary_logo_color.svg"
          alt="Noetiq Logo"
          class="h-14 w-auto"
        />
      </a>
    </div>
    <div class="flex items-center justify-center h-12">
      <Astronav>
        <MenuItems class="hidden md:flex md:justify-center md:space-x-8 text-[#4B3832] font-light font-[Anuphan]">
          <a href="/" class="hover:text-[#8C6A5E] transition">Home</a>

          <Dropdown class="group relative">
            <button class="hover:text-[#8C6A5E] transition flex items-center">
              <span>Solutions</span>
              <svg
                class="ml-1 w-4 h-4 group-open:rotate-180 transition-transform"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path
                  fill-rule="evenodd"
                  d="M5.23 7.21a.75.75 0 011.06-.02L10 10.585l3.71-3.4a.75.75 0 111.02 1.1l-4.23 3.88a.75.75 0 01-1.02 0L5.21 8.27a.75.75 0 01.02-1.06z"
                  clip-rule="evenodd"></path>
              </svg>
            </button>
            <DropdownItems>
              <div class="absolute top-full left-0 bg-[#F5EFE6] shadow-md rounded-md p-2">
                <ul>
                  <li>
                    <a href="/solutions/frameworks" class="block px-4 py-2 hover:text-[#8C6A5E]">Frameworks</a>
                  </li>
                  <li><a href="/solutions/products" class="block px-4 py-2 hover:text-[#8C6A5E]">Products</a></li>
                  <li><a href="/solutions/services" class="block px-4 py-2 hover:text-[#8C6A5E]">Services</a></li>
                </ul>
              </div>
            </DropdownItems>
          </Dropdown>
          <a href="/blog" class="hover:text-[#8C6A5E] transition">Research Blog</a>
          <a href="/about" class="hover:text-[#8C6A5E] transition">About</a>
        </MenuItems>
      </Astronav>
    </div>

    <div class="flex justify-end items-center gap-4">
      <a href="mailto:support@noetiqresearch.com">
        <TfiEmail className="text-[#4B3832] hover:text-[#8C6A5E] w-4 h-4 cursor-pointer" />
      </a>
      <a href="https://www.linkedin.com/company/noetiq-research" target="_blank" rel="noopener noreferrer">
        <FaLinkedin className="text-[#4B3832] hover:text-[#8C6A5E] w-4 h-4 cursor-pointer" />
      </a>
      <a href="https://x.com/noetiq" target="_blank" rel="noopener noreferrer">
        <FaXTwitter className="text-[#4B3832] hover:text-[#8C6A5E] w-4 h-4 cursor-pointer" />
      </a>
      <a href="https://github.com/noetiq" target="_blank" rel="noopener noreferrer">
        <FaGithub className="text-[#4B3832] hover:text-[#8C6A5E] w-4 h-4 cursor-pointer" />
      </a>
      <a href="https://huggingface.co/" class="flex items-center" target="_blank" rel="noopener noreferrer">
        <img src="/src/assets/images/huggingface-text.svg" alt="Hugging Face Logo" class="h-3 w-auto" />
      </a>
    </div>
  </div>
</header>
